Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");require("@k2oss/k2-broker-core");var t=require("./kotak-api-wrapper");function s(t,s,a,i){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:switch(t){case"RegisterPayment":return[3,1];case"GetPaymentState":return[3,3]}return[3,5];case 1:return[4,n(a,i)];case 2:return e.sent(),[3,6];case 3:return[4,r(a,i)];case 4:return e.sent(),[3,6];case 5:throw new Error("The method "+t+" is not supported.");case 6:return[2]}}))}))}function n(e,s){var n=s.EndpointUrl;return new Promise((function(s,r){new t.KotakAPIWrapper.KotakAPIWrapper(n,"./assets/cms_generic_service.wsdl").registerPayment(e).then((function(e){console.log(e),postResult(a(e)),s()})).catch((function(e){console.log(e),postResult(a(e)),r(e)}))}))}function r(e,s){var n=s.EndpointUrl;return new Promise((function(s,r){new t.KotakAPIWrapper.KotakAPIWrapper(n,"./assets/cms_generic_service.wsdl").getPaymentState(e).then((function(e){console.log(e),postResult(a(e)),s()})).catch((function(e){console.log(e),postResult(a(e)),r(e)}))}))}function a(e){return{messageId:e.messageId,statusCode:e.statusCode,statusDescription:e.statusDescription,errorCode:e.errorCode,errorDescription:e.errorDescription,debugRequest:e.debugRequest,debugResponse:e.debugResponse}}metadata={systemName:"Kotak Bank API",displayName:"Kotak Bank API",description:"An example broker that accesses to Kotak Bank API.",configuration:{EndpointUrl:{displayName:"Endpoint Url",type:"string",value:"https://apigwuat.kotak.com:8443/cms_generic_service?apikey=l7xx9e2c880d0b4549049ff62c5bf595c310"}}},ondescribe=function(t){t.configuration;return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return postSchema({objects:{KotakBankAPI:{displayName:"Kotak Bank payment API",description:"Kotak Bank payment API",properties:{resultMessage:{displayName:"ResultMessage",type:"string"},statusCode:{displayName:"statusCode",type:"string"},statusDescription:{displayName:"statusDescription",type:"string"}},methods:{RegisterPayment:{displayName:"Perform payment request",type:"execute",parameters:{pMessageId:{displayName:"pMessageId",description:"Message Id",type:"string"},pMessageSource:{displayName:"pMessageSource",description:"Message Source",type:"string"},pClientCode:{displayName:"pClientCode",description:"Client Code",type:"string"},pTxnAmount:{displayName:"pTxnAmount",description:"Transaction amount",type:"number"},pAccountNo:{displayName:"pAccountNo",description:"Account No",type:"string"},pRecBrCd:{displayName:"pRecBrCd",description:"RecBrCd",type:"string"},pPaymentDt:{displayName:"pPaymentDt",description:"Payment Date",type:"string"},pBeneAccountNo:{displayName:"pBeneAccountNo",description:"Bene account No",type:"string"},pDrDesc:{displayName:"pDrDesc",description:"DrDesc",type:"string"},pBeneName:{displayName:"pBeneName",description:"BeneName",type:"string"},pInstDate:{displayName:"pInstDate",description:"InstDt",type:"string"},pPaymentDtl1:{displayName:"pPaymentDtl1",description:"pPaymentDtl1",type:"string"},pEnrichment:{displayName:"pEnrichment",description:"pEnrichment",type:"string"}},requiredParameters:["pMessageId","pTxnAmount"],outputs:["statusCode","statusDescription"]}}}}}),[2]}))}))},onexecute=function(t){var n=t.objectName,r=t.methodName,a=t.parameters,i=t.properties,o=t.configuration;t.schema;return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:switch(n){case"KotakBankAPI":return[3,1]}return[3,3];case 1:return[4,s(r,i,a,o)];case 2:return e.sent(),[3,4];case 3:throw new Error("The object "+n+" is not supported.");case 4:return[2]}}))}))};
//# sourceMappingURL=index.js.map
